# 日本語でのコミットメッセージベストプラクティス

日本語でコミットメッセージを書く際の推奨事項とパターン集。

## 基本原則

### 1. 簡潔かつ明確に

- 1行目は50文字以内を目標
- 何をしたかを端的に記述
- 詳細は2行目以降に記載

### 2. 動詞で始める

文の主語を省略し、動詞で始めることで簡潔になります。

✅ 良い例:
- `ログイン機能を追加`
- `ユーザー登録時のバリデーションを修正`
- `READMEの誤字を訂正`

❌ 悪い例:
- `ログイン機能を追加しました` (過去形は冗長)
- `ユーザーがログインできるようにする` (主語が不明確)

### 3. 「〜を」「〜の」を使う

目的語を明確にすることで、何に対する変更かがわかりやすくなります。

✅ `ログイン画面のレイアウトを修正`
✅ `APIレスポンスの型定義を追加`

### 4. Conventional Commitsとの併用

英語のプレフィックスと日本語を組み合わせることも有効です。

```
feat: ユーザー認証機能を追加
fix: ログイン時のタイムアウトエラーを修正
docs: インストール手順を更新
```

## フォーマットパターン

### パターン1: シンプル形式

```
[動詞] + [対象] + [内容]
```

例:
- `追加: ダークモード機能`
- `修正: 日付フォーマットのバグ`
- `削除: 未使用のコンポーネント`
- `更新: 依存パッケージ`

### パターン2: Conventional Commits形式

```
<type>: [日本語の説明]

[詳細な説明]
```

例:
```
feat: パスワードリセット機能を実装

メール認証によるパスワードリセットフローを追加。
トークンの有効期限は24時間。

Closes #123
```

### パターン3: プレフィックス形式

```
[カテゴリ] 変更内容
```

例:
- `[機能追加] ソーシャルログイン対応`
- `[バグ修正] IE11での表示崩れを解消`
- `[リファクタ] 認証ロジックを共通化`
- `[ドキュメント] API仕様書を更新`

## カテゴリの日本語訳

Conventional Commitsの各typeに対する日本語表現:

| Type | 日本語 | 説明 |
|------|--------|------|
| feat | 機能追加 | 新機能の追加 |
| fix | バグ修正 | バグの修正 |
| docs | ドキュメント | ドキュメントのみの変更 |
| style | スタイル | コードの意味に影響しない変更 |
| refactor | リファクタリング | バグ修正や機能追加を伴わないコード変更 |
| perf | パフォーマンス | パフォーマンス向上のための変更 |
| test | テスト | テストの追加・修正 |
| build | ビルド | ビルドシステムや依存関係の変更 |
| ci | CI | CI設定ファイルやスクリプトの変更 |
| chore | その他 | その他の変更 |

## 具体例

### 機能追加

```
feat: お気に入り機能を実装

ユーザーが記事をお気に入りに追加・削除できる機能を追加。
お気に入り一覧ページも新設。

実装内容:
- お気に入りボタンコンポーネント
- お気に入り一覧API
- お気に入り一覧画面
```

### バグ修正

```
fix: 検索結果のページネーションが動作しない問題を解消

2ページ目以降に遷移できなかった原因は、
クエリパラメータの解析処理に誤りがあったため。
parseInt()を使用して数値型に変換するよう修正。

Fixes #456
```

### リファクタリング

```
refactor: 日付処理ユーティリティを共通化

各コンポーネントで重複していた日付フォーマット処理を
utils/date.tsに集約。コードの保守性が向上。
```

### ドキュメント

```
docs: 開発環境のセットアップ手順を追加

READMEに以下を追加:
- 必要な環境変数の説明
- データベースのマイグレーション手順
- よくあるエラーとその対処法
```

### パフォーマンス改善

```
perf: 商品一覧の読み込み速度を改善

仮想スクロールを導入し、初期レンダリングを高速化。
1000件の商品表示が3秒から0.5秒に短縮。
```

## よくある間違い

### ❌ 過去形を使う

```
❌ ログイン機能を追加した
✅ ログイン機能を追加
```

日本語では現在形（辞書形）を使うことで簡潔になります。

### ❌ 主語を含める

```
❌ 私はユーザー登録画面を修正しました
✅ ユーザー登録画面を修正
```

コミットの主体は常にコミッター自身なので、主語は不要です。

### ❌ 曖昧な表現

```
❌ いろいろ修正
❌ バグ修正
✅ ログインフォームのバリデーションエラーを修正
```

具体的に何を変更したかを記述します。

### ❌ ファイル名だけを記載

```
❌ auth.ts を更新
✅ 認証トークンの有効期限チェックを追加
```

ファイル名ではなく、変更の内容を記述します。

### ❌ 長すぎる1行目

```
❌ ユーザー認証機能にソーシャルログイン対応を追加し、Google、GitHub、Twitterでのログインを可能にする
✅ ソーシャルログイン機能を追加

Google、GitHub、Twitterでのログインに対応。
OAuth2.0を使用した認証フローを実装。
```

1行目は要約とし、詳細は本文に記載します。

## 英語との使い分け

### 英語を推奨するケース

- オープンソースプロジェクト（国際的なコントリビューターがいる場合）
- Conventional Commitsに厳密に従いたい場合
- 自動化ツール（semantic-releaseなど）を使用する場合

### 日本語を推奨するケース

- チーム全員が日本語話者の場合
- 迅速な開発とコミュニケーションを優先する場合
- ドメイン固有の用語を正確に表現したい場合

### ハイブリッドアプローチ

英語のプレフィックスと日本語の説明を組み合わせる:

```
feat: マルチテナント対応

複数組織の管理機能を追加:
- 組織切り替えUI
- 組織ごとのデータ分離
- 組織管理者権限
```

## プロジェクトでのルール設定

チーム内で以下を決定・文書化することを推奨:

1. **言語** - 日本語 or 英語 or ハイブリッド
2. **フォーマット** - Conventional Commits or 独自形式
3. **文字数制限** - 1行目の最大文字数
4. **必須要素** - Issue番号の記載ルールなど
5. **ツール** - commitlintなどの導入有無

### 設定例

```
# プロジェクトのコミットメッセージルール

## 形式
feat: [日本語の説明]

## ルール
- 1行目は50文字以内
- typeは英語のConventional Commits形式
- 説明は日本語で記述
- 関連IssueがあればCloses #XXXを記載

## 例
feat: ユーザープロフィール編集機能を追加
fix: パスワード変更時のエラーハンドリングを改善
docs: API仕様書を更新
```

## まとめ

日本語でのコミットメッセージは:

- **簡潔に**: 1行目は50文字以内
- **明確に**: 何をしたかを具体的に
- **動詞始まり**: 主語を省略し動詞で開始
- **一貫性**: プロジェクト内でルールを統一

Conventional Commitsとの併用も効果的です。
チームの状況に応じて最適なフォーマットを選択しましょう。
